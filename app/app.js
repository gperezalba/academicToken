var web3 = new Web3(new Web3.providers.HttpProvider("http://localhost:8545"));

var verifierAbi = [{"constant":false,"inputs":[{"name":"_identity","type":"address"},{"name":"claimType","type":"uint256"}],"name":"checkClaim","outputs":[{"name":"claimValid","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"trustedClaimHolder","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"trust","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_identity","type":"address"},{"name":"claimType","type":"uint256"}],"name":"claimIsValid","outputs":[{"name":"claimValid","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"sig","type":"bytes"},{"name":"dataHash","type":"bytes32"}],"name":"getRecoveredAddress","outputs":[{"name":"addr","type":"address"}],"payable":false,"stateMutability":"pure","type":"function"},{"inputs":[{"name":"_trustedClaimHolder","type":"address"},{"name":"_trustContract","type":"address"}],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"name":"_identity","type":"address"},{"indexed":false,"name":"claimType","type":"uint256"}],"name":"ClaimValid","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"_identity","type":"address"},{"indexed":false,"name":"claimType","type":"uint256"}],"name":"ClaimInvalid","type":"event"}];
var verifierAddress = "0xc39d93ab0423a2dd46a3da303d19078c4689a03d";
var verifier = new web3.eth.Contract(verifierAbi, verifierAddress);

var alumnoBytecode = "0x6080604052600033604051602001808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166c010000000000000000000000000281526014019150506040516020818303038152906040526040518082805190602001908083835b6020831015156100965780518252602082019150602081019050602083039250610071565b6001836020036101000a03801982511681845116808217855250505050505090500191505060405180910390209050806001600083600019166000191681526020019081526020016000206002018160001916905550600180600083600019166000191681526020019081526020016000206000018190555060018060008360001916600019168152602001908152602001600020600101819055506002600060018152602001908152602001600020819080600181540180825580915050906001820390600052602060002001600090919290919091509060001916905550600180600083600019166000191681526020019081526020016000206000015482600019167f480000bb1edad8ca1470381cc334b1917fbd51c6531f3a623ea8e0ec7e38a6e960405160405180910390a4506126d9806101d76000396000f3006080604052600436106100ba576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff168063032c1a8a146100bf57806312aaac70146101045780631d3812401461015f578063262b54f5146101bc5780634eee424a1461023e578063747442d314610287578063862642f5146102d85780639010f72614610321578063b1a34e0d146103a3578063b61d27f6146104e8578063c9100bcb1461058f578063d202158d14610752575b600080fd5b3480156100cb57600080fd5b506100ee60048036038101908080356000191690602001909291905050506107a5565b6040518082815260200191505060405180910390f35b34801561011057600080fd5b5061013360048036038101908080356000191690602001909291905050506107cd565b604051808481526020018381526020018260001916600019168152602001935050505060405180910390f35b34801561016b57600080fd5b506101a26004803603810190808035600019169060200190929190803590602001909291908035906020019092919050505061083c565b604051808215151515815260200191505060405180910390f35b3480156101c857600080fd5b506101e760048036038101908080359060200190929190505050610b61565b6040518080602001828103825283818151815260200191508051906020019060200280838360005b8381101561022a57808201518184015260208101905061020f565b505050509050019250505060405180910390f35b34801561024a57600080fd5b5061026d6004803603810190808035600019169060200190929190505050610bd0565b604051808215151515815260200191505060405180910390f35b34801561029357600080fd5b506102be600480360381019080803590602001909291908035151590602001909291905050506110ba565b604051808215151515815260200191505060405180910390f35b3480156102e457600080fd5b506103076004803603810190808035600019169060200190929190505050611634565b604051808215151515815260200191505060405180910390f35b34801561032d57600080fd5b5061034c6004803603810190808035906020019092919050505061179f565b6040518080602001828103825283818151815260200191508051906020019060200280838360005b8381101561038f578082015181840152602081019050610374565b505050509050019250505060405180910390f35b3480156103af57600080fd5b506104ca6004803603810190808035906020019092919080359060200190929190803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509192919290803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509192919290803590602001908201803590602001908080601f016020809104026020016040519081016040528093929190818152602001838380828437820191505050505050919291929050505061180e565b60405180826000191660001916815260200191505060405180910390f35b3480156104f457600080fd5b50610579600480360381019080803573ffffffffffffffffffffffffffffffffffffffff16906020019092919080359060200190929190803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509192919290505050611e0b565b6040518082815260200191505060405180910390f35b34801561059b57600080fd5b506105be60048036038101908080356000191690602001909291905050506121c5565b604051808781526020018681526020018573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001806020018060200180602001848103845287818151815260200191508051906020019080838360005b83811015610644578082015181840152602081019050610629565b50505050905090810190601f1680156106715780820380516001836020036101000a031916815260200191505b50848103835286818151815260200191508051906020019080838360005b838110156106aa57808201518184015260208101905061068f565b50505050905090810190601f1680156106d75780820380516001836020036101000a031916815260200191505b50848103825285818151815260200191508051906020019080838360005b838110156107105780820151818401526020810190506106f5565b50505050905090810190601f16801561073d5780820380516001836020036101000a031916815260200191505b50995050505050505050505060405180910390f35b34801561075e57600080fd5b5061078b60048036038101908080356000191690602001909291908035906020019092919050505061248f565b604051808215151515815260200191505060405180910390f35b6000600160008360001916600019168152602001908152602001600020600001549050919050565b60008060006001600085600019166000191681526020019081526020016000206000015460016000866000191660001916815260200190815260200160002060010154600160008760001916600019168152602001908152602001600020600201549250925092509193909250565b600083600019166001600086600019166000191681526020019081526020016000206002015460001916141515156108dc576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260128152602001807f4b657920616c726561647920657869737473000000000000000000000000000081525060200191505060405180910390fd5b3073ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141515610a73576109d833604051602001808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166c010000000000000000000000000281526014019150506040516020818303038152906040526040518082805190602001908083835b6020831015156109a4578051825260208201915060208101905060208303925061097f565b6001836020036101000a0380198251168184511680821785525050505050509050019150506040518091039020600161248f565b1515610a72576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260238152602001807f53656e64657220646f6573206e6f742068617665206d616e6167656d656e742081526020017f6b6579000000000000000000000000000000000000000000000000000000000081525060400191505060405180910390fd5b5b8360016000866000191660001916815260200190815260200160002060020181600019169055508260016000866000191660001916815260200190815260200160002060000181905550816001600086600019166000191681526020019081526020016000206001018190555060026000848152602001908152602001600020849080600181540180825580915050906001820390600052602060002001600090919290919091509060001916905550818385600019167f480000bb1edad8ca1470381cc334b1917fbd51c6531f3a623ea8e0ec7e38a6e960405160405180910390a4600190509392505050565b606060056000838152602001908152602001600020805480602002602001604051908101604052809291908181526020018280548015610bc457602002820191906000526020600020905b81546000191681526020019060010190808311610bac575b50505050509050919050565b60003073ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141515610d6957610cce33604051602001808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166c010000000000000000000000000281526014019150506040516020818303038152906040526040518082805190602001908083835b602083101515610c9a5780518252602082019150602081019050602083039250610c75565b6001836020036101000a0380198251168184511680821785525050505050509050019150506040518091039020600161248f565b1515610d68576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260238152602001807f53656e64657220646f6573206e6f742068617665206d616e6167656d656e742081526020017f6b6579000000000000000000000000000000000000000000000000000000000081525060400191505060405180910390fd5b5b60046000836000191660001916815260200190815260200160002060020160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166004600084600019166000191681526020019081526020016000206000015483600019167f3cf57863a89432c61c4a27073c6ee39e8a764bff5a05aebfbcdcdc80b2e6130a60046000876000191660001916815260200190815260200160002060010154600460008860001916600019168152602001908152602001600020600301600460008960001916600019168152602001908152602001600020600401600460008a6000191660001916815260200190815260200160002060050160405180858152602001806020018060200180602001848103845287818154600181600116156101000203166002900481526020019150805460018160011615610100020316600290048015610f135780601f10610ee857610100808354040283529160200191610f13565b820191906000526020600020905b815481529060010190602001808311610ef657829003601f168201915b5050848103835286818154600181600116156101000203166002900481526020019150805460018160011615610100020316600290048015610f965780601f10610f6b57610100808354040283529160200191610f96565b820191906000526020600020905b815481529060010190602001808311610f7957829003601f168201915b50508481038252858181546001816001161561010002031660029004815260200191508054600181600116156101000203166002900480156110195780601f10610fee57610100808354040283529160200191611019565b820191906000526020600020905b815481529060010190602001808311610ffc57829003601f168201915b505097505050505050505060405180910390a460046000836000191660001916815260200190815260200160002060008082016000905560018201600090556002820160006101000a81549073ffffffffffffffffffffffffffffffffffffffff021916905560038201600061108f91906124f8565b60048201600061109f91906124f8565b6005820160006110af9190612540565b505060019050919050565b600061118333604051602001808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166c010000000000000000000000000281526014019150506040516020818303038152906040526040518082805190602001908083835b60208310151561114f578051825260208201915060208101905060208303925061112a565b6001836020036101000a0380198251168184511680821785525050505050509050019150506040518091039020600261248f565b15156111f7576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252601f8152602001807f53656e64657220646f6573206e6f74206861766520616374696f6e206b65790081525060200191505060405180910390fd5b827fb3932da477fe5d6c8ff2eafef050c0f3a1af18fc07121001482600f36f3715d883604051808215151515815260200191505060405180910390a26001151582151514156115fa5760016003600085815260200190815260200160002060030160006101000a81548160ff0219169083151502179055506003600084815260200190815260200160002060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166003600085815260200190815260200160002060020160405180828054600181600116156101000203166002900480156113375780601f1061130c57610100808354040283529160200191611337565b820191906000526020600020905b81548152906001019060200180831161131a57829003601f168201915b50509150506000604051808303816000865af1915050905080156114bf5760016003600085815260200190815260200160002060030160016101000a81548160ff02191690831515021790555060036000848152602001908152602001600020600101546003600085815260200190815260200160002060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16847f1f920dbda597d7bf95035464170fa58d0a4b57f13a1c315ace6793b9f63688b86003600088815260200190815260200160002060020160405180806020018281038252838181546001816001161561010002031660029004815260200191508054600181600116156101000203166002900480156114a95780601f1061147e576101008083540402835291602001916114a9565b820191906000526020600020905b81548152906001019060200180831161148c57829003601f168201915b50509250505060405180910390a480905061162e565b60036000848152602001908152602001600020600101546003600085815260200190815260200160002060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16847fe10c49d9f7c71da23262367013434763cfdb2332267641728d25cd712c5c6a686003600088815260200190815260200160002060020160405180806020018281038252838181546001816001161561010002031660029004815260200191508054600181600116156101000203166002900480156115e45780601f106115b9576101008083540402835291602001916115e4565b820191906000526020600020905b8154815290600101906020018083116115c757829003601f168201915b50509250505060405180910390a480905061162e565b60006003600085815260200190815260200160002060030160006101000a81548160ff021916908315150217905550600190505b92915050565b6000816000191660016000846000191660001916815260200190815260200160002060020154600019161415156116d3576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252600b8152602001807f4e6f2073756368206b657900000000000000000000000000000000000000000081525060200191505060405180910390fd5b600160008360001916600019168152602001908152602001600020600101546001600084600019166000191681526020019081526020016000206000015460016000856000191660001916815260200190815260200160002060020154600019167f585a4aef50f8267a92b32412b331b20f7f8b96f2245b253b9cc50dcc621d339760405160405180910390a460016000836000191660001916815260200190815260200160002060008082016000905560018201600090556002820160009055505060019050919050565b60606002600083815260200190815260200160002080548060200260200160405190810160405280929190818152602001828054801561180257602002820191906000526020600020905b815460001916815260200190600101908083116117ea575b50505050509050919050565b6000808588604051602001808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166c01000000000000000000000000028152601401828152602001925050506040516020818303038152906040526040518082805190602001908083835b6020831015156118a95780518252602082019150602081019050602083039250611884565b6001836020036101000a038019825116818451168082178552505050505050905001915050604051809103902090503073ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141515611a6f576119d433604051602001808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166c010000000000000000000000000281526014019150506040516020818303038152906040526040518082805190602001908083835b6020831015156119a0578051825260208201915060208101905060208303925061197b565b6001836020036101000a0380198251168184511680821785525050505050509050019150506040518091039020600361248f565b1515611a6e576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260258152602001807f53656e64657220646f6573206e6f74206861766520636c61696d207369676e6581526020017f72206b657900000000000000000000000000000000000000000000000000000081525060400191505060405180910390fd5b5b8573ffffffffffffffffffffffffffffffffffffffff1660046000836000191660001916815260200190815260200160002060020160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16141515611b2657600560008981526020019081526020016000208190806001815401808255809150509060018203906000526020600020016000909192909190915090600019169055505b876004600083600019166000191681526020019081526020016000206000018190555086600460008360001916600019168152602001908152602001600020600101819055508560046000836000191660001916815260200190815260200160002060020160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550846004600083600019166000191681526020019081526020016000206003019080519060200190611bfb929190612588565b50836004600083600019166000191681526020019081526020016000206004019080519060200190611c2e929190612588565b50826004600083600019166000191681526020019081526020016000206005019080519060200190611c61929190612608565b508573ffffffffffffffffffffffffffffffffffffffff168882600019167f46149b18aa084502c3f12bc75e19eda8bda8d102b82cce8474677a6d0d5f43c58a89898960405180858152602001806020018060200180602001848103845287818151815260200191508051906020019080838360005b83811015611cf2578082015181840152602081019050611cd7565b50505050905090810190601f168015611d1f5780820380516001836020036101000a031916815260200191505b50848103835286818151815260200191508051906020019080838360005b83811015611d58578082015181840152602081019050611d3d565b50505050905090810190601f168015611d855780820380516001836020036101000a031916815260200191505b50848103825285818151815260200191508051906020019080838360005b83811015611dbe578082015181840152602081019050611da3565b50505050905090810190601f168015611deb5780820380516001836020036101000a031916815260200191505b5097505050505050505060405180910390a4809150509695505050505050565b6000600360008054815260200190815260200160002060030160019054906101000a900460ff16151515611ea7576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260108152602001807f416c72656164792065786563757465640000000000000000000000000000000081525060200191505060405180910390fd5b83600360008054815260200190815260200160002060000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550826003600080548152602001908152602001600020600101819055508160036000805481526020019081526020016000206002019080519060200190611f44929190612588565b50828473ffffffffffffffffffffffffffffffffffffffff166000547f8afcfabcb00e47a53a8fc3e9f23ff47ee1926194bb1350dd007c50b412a6cee8856040518080602001828103825283818151815260200191508051906020019080838360005b83811015611fc2578082015181840152602081019050611fa7565b50505050905090810190601f168015611fef5780820380516001836020036101000a031916815260200191505b509250505060405180910390a46120c333604051602001808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166c010000000000000000000000000281526014019150506040516020818303038152906040526040518082805190602001908083835b60208310151561208f578051825260208201915060208101905060208303925061206a565b6001836020036101000a0380198251168184511680821785525050505050509050019150506040518091039020600161248f565b80612191575061219033604051602001808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166c010000000000000000000000000281526014019150506040516020818303038152906040526040518082805190602001908083835b60208310151561215c5780518252602082019150602081019050602083039250612137565b6001836020036101000a0380198251168184511680821785525050505050509050019150506040518091039020600261248f565b5b156121a5576121a360005460016110ba565b505b600080815480929190600101919050555060016000540390509392505050565b600080600060608060606004600088600019166000191681526020019081526020016000206000015460046000896000191660001916815260200190815260200160002060010154600460008a6000191660001916815260200190815260200160002060020160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16600460008b60001916600019168152602001908152602001600020600301600460008c60001916600019168152602001908152602001600020600401600460008d60001916600019168152602001908152602001600020600501828054600181600116156101000203166002900480601f01602080910402602001604051908101604052809291908181526020018280546001816001161561010002031660029004801561233b5780601f106123105761010080835404028352916020019161233b565b820191906000526020600020905b81548152906001019060200180831161231e57829003601f168201915b50505050509250818054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156123d75780601f106123ac576101008083540402835291602001916123d7565b820191906000526020600020905b8154815290600101906020018083116123ba57829003601f168201915b50505050509150808054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156124735780601f1061244857610100808354040283529160200191612473565b820191906000526020600020905b81548152906001019060200180831161245657829003601f168201915b5050505050905095509550955095509550955091939550919395565b6000806000600102600160008660001916600019168152602001908152602001600020600201546000191614156124c957600091506124f1565b8260016000866000191660001916815260200190815260200160002060000154111590508091505b5092915050565b50805460018160011615610100020316600290046000825580601f1061251e575061253d565b601f01602090049060005260206000209081019061253c9190612688565b5b50565b50805460018160011615610100020316600290046000825580601f106125665750612585565b601f0160209004906000526020600020908101906125849190612688565b5b50565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106125c957805160ff19168380011785556125f7565b828001600101855582156125f7579182015b828111156125f65782518255916020019190600101906125db565b5b5090506126049190612688565b5090565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f1061264957805160ff1916838001178555612677565b82800160010185558215612677579182015b8281111561267657825182559160200191906001019061265b565b5b5090506126849190612688565b5090565b6126aa91905b808211156126a657600081600090555060010161268e565b5090565b905600a165627a7a72305820b15dd0ce36d1ddd0d57cb7ced2056b2c343e690bec7a21f0965e4a0da7142bcd0029"
var alumnoAbi = [{"constant":true,"inputs":[{"name":"_key","type":"bytes32"}],"name":"getKeyPurpose","outputs":[{"name":"purpose","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_key","type":"bytes32"}],"name":"getKey","outputs":[{"name":"purpose","type":"uint256"},{"name":"keyType","type":"uint256"},{"name":"key","type":"bytes32"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_key","type":"bytes32"},{"name":"_purpose","type":"uint256"},{"name":"_type","type":"uint256"}],"name":"addKey","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_claimType","type":"uint256"}],"name":"getClaimIdsByType","outputs":[{"name":"claimIds","type":"bytes32[]"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_claimId","type":"bytes32"}],"name":"removeClaim","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_id","type":"uint256"},{"name":"_approve","type":"bool"}],"name":"approve","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_key","type":"bytes32"}],"name":"removeKey","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_purpose","type":"uint256"}],"name":"getKeysByPurpose","outputs":[{"name":"_keys","type":"bytes32[]"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_claimType","type":"uint256"},{"name":"_scheme","type":"uint256"},{"name":"_issuer","type":"address"},{"name":"_signature","type":"bytes"},{"name":"_data","type":"bytes"},{"name":"_uri","type":"string"}],"name":"addClaim","outputs":[{"name":"claimRequestId","type":"bytes32"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_value","type":"uint256"},{"name":"_data","type":"bytes"}],"name":"execute","outputs":[{"name":"executionId","type":"uint256"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_claimId","type":"bytes32"}],"name":"getClaim","outputs":[{"name":"claimType","type":"uint256"},{"name":"scheme","type":"uint256"},{"name":"issuer","type":"address"},{"name":"signature","type":"bytes"},{"name":"data","type":"bytes"},{"name":"uri","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_key","type":"bytes32"},{"name":"_purpose","type":"uint256"}],"name":"keyHasPurpose","outputs":[{"name":"result","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"anonymous":false,"inputs":[{"indexed":true,"name":"claimRequestId","type":"uint256"},{"indexed":true,"name":"claimType","type":"uint256"},{"indexed":false,"name":"scheme","type":"uint256"},{"indexed":true,"name":"issuer","type":"address"},{"indexed":false,"name":"signature","type":"bytes"},{"indexed":false,"name":"data","type":"bytes"},{"indexed":false,"name":"uri","type":"string"}],"name":"ClaimRequested","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"claimId","type":"bytes32"},{"indexed":true,"name":"claimType","type":"uint256"},{"indexed":true,"name":"issuer","type":"address"},{"indexed":false,"name":"signatureType","type":"uint256"},{"indexed":false,"name":"signature","type":"bytes32"},{"indexed":false,"name":"claim","type":"bytes"},{"indexed":false,"name":"uri","type":"string"}],"name":"ClaimAdded","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"claimId","type":"bytes32"},{"indexed":true,"name":"claimType","type":"uint256"},{"indexed":false,"name":"scheme","type":"uint256"},{"indexed":true,"name":"issuer","type":"address"},{"indexed":false,"name":"signature","type":"bytes"},{"indexed":false,"name":"data","type":"bytes"},{"indexed":false,"name":"uri","type":"string"}],"name":"ClaimAdded","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"claimId","type":"bytes32"},{"indexed":true,"name":"claimType","type":"uint256"},{"indexed":false,"name":"scheme","type":"uint256"},{"indexed":true,"name":"issuer","type":"address"},{"indexed":false,"name":"signature","type":"bytes"},{"indexed":false,"name":"data","type":"bytes"},{"indexed":false,"name":"uri","type":"string"}],"name":"ClaimRemoved","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"claimId","type":"bytes32"},{"indexed":true,"name":"claimType","type":"uint256"},{"indexed":false,"name":"scheme","type":"uint256"},{"indexed":true,"name":"issuer","type":"address"},{"indexed":false,"name":"signature","type":"bytes"},{"indexed":false,"name":"data","type":"bytes"},{"indexed":false,"name":"uri","type":"string"}],"name":"ClaimChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"executionId","type":"uint256"},{"indexed":true,"name":"to","type":"address"},{"indexed":true,"name":"value","type":"uint256"},{"indexed":false,"name":"data","type":"bytes"}],"name":"ExecutionFailed","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"key","type":"bytes32"},{"indexed":true,"name":"purpose","type":"uint256"},{"indexed":true,"name":"keyType","type":"uint256"}],"name":"KeyAdded","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"key","type":"bytes32"},{"indexed":true,"name":"purpose","type":"uint256"},{"indexed":true,"name":"keyType","type":"uint256"}],"name":"KeyRemoved","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"executionId","type":"uint256"},{"indexed":true,"name":"to","type":"address"},{"indexed":true,"name":"value","type":"uint256"},{"indexed":false,"name":"data","type":"bytes"}],"name":"ExecutionRequested","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"executionId","type":"uint256"},{"indexed":true,"name":"to","type":"address"},{"indexed":true,"name":"value","type":"uint256"},{"indexed":false,"name":"data","type":"bytes"}],"name":"Executed","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"executionId","type":"uint256"},{"indexed":false,"name":"approved","type":"bool"}],"name":"Approved","type":"event"}];
var alumnoAddress = "0x9cca28d98ec895c50c266b7f138dd6316aadb52a";
var arrayAlumnos = []
var alumno = new web3.eth.Contract(alumnoAbi, alumnoAddress);
arrayAlumnos.push(new web3.eth.Contract(alumnoAbi, alumnoAddress))

var unirAbi = [{"constant":true,"inputs":[{"name":"_key","type":"bytes32"}],"name":"getKeyPurpose","outputs":[{"name":"purpose","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_key","type":"bytes32"}],"name":"getKey","outputs":[{"name":"purpose","type":"uint256"},{"name":"keyType","type":"uint256"},{"name":"key","type":"bytes32"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_key","type":"bytes32"},{"name":"_purpose","type":"uint256"},{"name":"_type","type":"uint256"}],"name":"addKey","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_claimType","type":"uint256"}],"name":"getClaimIdsByType","outputs":[{"name":"claimIds","type":"bytes32[]"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_claimId","type":"bytes32"}],"name":"removeClaim","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_id","type":"uint256"},{"name":"_approve","type":"bool"}],"name":"approve","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_key","type":"bytes32"}],"name":"removeKey","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_purpose","type":"uint256"}],"name":"getKeysByPurpose","outputs":[{"name":"_keys","type":"bytes32[]"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_claimType","type":"uint256"},{"name":"_scheme","type":"uint256"},{"name":"_issuer","type":"address"},{"name":"_signature","type":"bytes"},{"name":"_data","type":"bytes"},{"name":"_uri","type":"string"}],"name":"addClaim","outputs":[{"name":"claimRequestId","type":"bytes32"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_value","type":"uint256"},{"name":"_data","type":"bytes"}],"name":"execute","outputs":[{"name":"executionId","type":"uint256"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_claimId","type":"bytes32"}],"name":"getClaim","outputs":[{"name":"claimType","type":"uint256"},{"name":"scheme","type":"uint256"},{"name":"issuer","type":"address"},{"name":"signature","type":"bytes"},{"name":"data","type":"bytes"},{"name":"uri","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_key","type":"bytes32"},{"name":"_purpose","type":"uint256"}],"name":"keyHasPurpose","outputs":[{"name":"result","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"anonymous":false,"inputs":[{"indexed":true,"name":"claimRequestId","type":"uint256"},{"indexed":true,"name":"claimType","type":"uint256"},{"indexed":false,"name":"scheme","type":"uint256"},{"indexed":true,"name":"issuer","type":"address"},{"indexed":false,"name":"signature","type":"bytes"},{"indexed":false,"name":"data","type":"bytes"},{"indexed":false,"name":"uri","type":"string"}],"name":"ClaimRequested","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"claimId","type":"bytes32"},{"indexed":true,"name":"claimType","type":"uint256"},{"indexed":true,"name":"issuer","type":"address"},{"indexed":false,"name":"signatureType","type":"uint256"},{"indexed":false,"name":"signature","type":"bytes32"},{"indexed":false,"name":"claim","type":"bytes"},{"indexed":false,"name":"uri","type":"string"}],"name":"ClaimAdded","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"claimId","type":"bytes32"},{"indexed":true,"name":"claimType","type":"uint256"},{"indexed":false,"name":"scheme","type":"uint256"},{"indexed":true,"name":"issuer","type":"address"},{"indexed":false,"name":"signature","type":"bytes"},{"indexed":false,"name":"data","type":"bytes"},{"indexed":false,"name":"uri","type":"string"}],"name":"ClaimAdded","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"claimId","type":"bytes32"},{"indexed":true,"name":"claimType","type":"uint256"},{"indexed":false,"name":"scheme","type":"uint256"},{"indexed":true,"name":"issuer","type":"address"},{"indexed":false,"name":"signature","type":"bytes"},{"indexed":false,"name":"data","type":"bytes"},{"indexed":false,"name":"uri","type":"string"}],"name":"ClaimRemoved","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"claimId","type":"bytes32"},{"indexed":true,"name":"claimType","type":"uint256"},{"indexed":false,"name":"scheme","type":"uint256"},{"indexed":true,"name":"issuer","type":"address"},{"indexed":false,"name":"signature","type":"bytes"},{"indexed":false,"name":"data","type":"bytes"},{"indexed":false,"name":"uri","type":"string"}],"name":"ClaimChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"executionId","type":"uint256"},{"indexed":true,"name":"to","type":"address"},{"indexed":true,"name":"value","type":"uint256"},{"indexed":false,"name":"data","type":"bytes"}],"name":"ExecutionFailed","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"key","type":"bytes32"},{"indexed":true,"name":"purpose","type":"uint256"},{"indexed":true,"name":"keyType","type":"uint256"}],"name":"KeyAdded","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"key","type":"bytes32"},{"indexed":true,"name":"purpose","type":"uint256"},{"indexed":true,"name":"keyType","type":"uint256"}],"name":"KeyRemoved","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"executionId","type":"uint256"},{"indexed":true,"name":"to","type":"address"},{"indexed":true,"name":"value","type":"uint256"},{"indexed":false,"name":"data","type":"bytes"}],"name":"ExecutionRequested","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"executionId","type":"uint256"},{"indexed":true,"name":"to","type":"address"},{"indexed":true,"name":"value","type":"uint256"},{"indexed":false,"name":"data","type":"bytes"}],"name":"Executed","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"executionId","type":"uint256"},{"indexed":false,"name":"approved","type":"bool"}],"name":"Approved","type":"event"}];
var unirAddress = "0xa504d432f7fb92e48e5c8fe488d07a676e8bc070"
var unir = new web3.eth.Contract(unirAbi, unirAddress);

var trustAbi = [{"constant":false,"inputs":[{"name":"trustedClaimHolder","type":"address"}],"name":"getTrusted","outputs":[{"name":"","type":"address[]"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"trustedClaimHolder","type":"address"}],"name":"addTrusted","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"anonymous":false,"inputs":[{"indexed":false,"name":"","type":"address[]"}],"name":"Trusted","type":"event"}];
var trustAddress = "0xd7e71cc7328a671130ca7c0a83c38f27616b4373";
var trust = new web3.eth.Contract(trustAbi, trustAddress);

/**Available Accounts
==================
(0) 0xe092b1fa25df5786d151246e492eed3d15ea4daa (~100 ETH)
(1) 0xc0d8f541ab8b71f20c10261818f2f401e8194049 (~100 ETH)
(2) 0xf1f8ef6b4d4ba31079e2263ec85c03fd5a0802bf (~100 ETH)
(3) 0xc91579bb7972f76d595f8665bffaf92874c8084c (~100 ETH)
(4) 0x6f03947036cba3279b07cd6ea5ca674ca51e52ba (~100 ETH)
(5) 0x889735777f51c84272a7feb0d763280179a529a9 (~100 ETH)
(6) 0x2c46bcb6da3ae85da881edeed4ec2fe92670f90f (~100 ETH)
(7) 0x6a71e87487c0ec01ecffd09a2042cb5ed507393e (~100 ETH)
(8) 0x3e014e5c311a7d6f652ca4f8bb016f4338a44118 (~100 ETH)
(9) 0x75c4fb2e81a6d3420125f5145182f528d1699146 (~100 ETH)
*/
/** Private Keys
==================
(0) 0x0cc0c2de7e8c30525b4ca3b9e0b9703fb29569060d403261055481df7014f7fa
(1) 0xb97de1848f97378ee439b37e776ffe11a2fff415b2f93dc240b2d16e9c184ba9
(2) 0x42f3b9b31fcaaa03ca71cab7d194979d0d1bedf16f8f4e9414f0ed4df699dd10
(3) 0x41219e3efe938f4b1b5bd68389705be763821460b940d5e2bd221f66f40028d3
(4) 0x64530eda5f401cc2e9bba4e7b2e0ba9b1bb9d95c344bf8643776b57bb6eb9845
(5) 0x76db32cb46895cdb4473c86b4468dbd45f46c1b3d7972002c72bea74efff18ef
(6) 0x3b747127e9ea07790d0fe9b8e5b6508953740d6cf0269d3145cdf1b69c22f2bb
(7) 0xc01836866febf10022ec9ae632677937f3070d4ed4819e5c6e03d3e8ec02dc2e
(8) 0xdf207d299d941818bb4f7822cf003662370a7d685016dfc3f1e2cac03d47fc1d
(9) 0x2d9d98ee99c8f7c664125ff2b3b91f356e880917b2d9fc508ffe1b647bd7a9fd
*/

var publicKeys = ["0xe092b1fa25df5786d151246e492eed3d15ea4daa","0xc0d8f541ab8b71f20c10261818f2f401e8194049","0xf1f8ef6b4d4ba31079e2263ec85c03fd5a0802bf","0xc91579bb7972f76d595f8665bffaf92874c8084c","0x6f03947036cba3279b07cd6ea5ca674ca51e52ba","0x889735777f51c84272a7feb0d763280179a529a9","0x2c46bcb6da3ae85da881edeed4ec2fe92670f90f","0x6a71e87487c0ec01ecffd09a2042cb5ed507393e","0x3e014e5c311a7d6f652ca4f8bb016f4338a44118","0x75c4fb2e81a6d3420125f5145182f528d1699146"]

var privateKeys = ["0x0cc0c2de7e8c30525b4ca3b9e0b9703fb29569060d403261055481df7014f7fa","0xb97de1848f97378ee439b37e776ffe11a2fff415b2f93dc240b2d16e9c184ba9","0x42f3b9b31fcaaa03ca71cab7d194979d0d1bedf16f8f4e9414f0ed4df699dd10","0x41219e3efe938f4b1b5bd68389705be763821460b940d5e2bd221f66f40028d3","0x64530eda5f401cc2e9bba4e7b2e0ba9b1bb9d95c344bf8643776b57bb6eb9845","0x76db32cb46895cdb4473c86b4468dbd45f46c1b3d7972002c72bea74efff18ef","0x3b747127e9ea07790d0fe9b8e5b6508953740d6cf0269d3145cdf1b69c22f2bb","0xc01836866febf10022ec9ae632677937f3070d4ed4819e5c6e03d3e8ec02dc2e","0xdf207d299d941818bb4f7822cf003662370a7d685016dfc3f1e2cac03d47fc1d","0x2d9d98ee99c8f7c664125ff2b3b91f356e880917b2d9fc508ffe1b647bd7a9fd"];

var unirPrivKey = privateKeys[4]

async function changeAdd() {
  let accounts = await web3.eth.getAccounts();
  web3.eth.defaultAccount = accounts[0];
  var currentAccount = web3.eth.defaultAccount;
  var temporizador = setInterval(function() {
    var list = document.getElementById("Addresses");
    var selected = list.options[list.selectedIndex].value;
    currentAccount = accounts[selected]
    if(currentAccount !== web3.eth.defaultAccount){
      alert("Last: " + web3.eth.defaultAccount + "," + "New: " + currentAccount);
      web3.eth.defaultAccount = currentAccount;
    }
  }, 100);
}
changeAdd();

async function initAcc() {
  let accounts = await web3.eth.getAccounts();
  var key1 = await arrayAlumnos[0].methods.getKeysByPurpose(2).call({gas: 300000});
  var key2 = await unir.methods.getKeysByPurpose(3).call({gas: 300000});
  if (key1.length == 0 && key2 == 0){
    arrayAlumnos[0].methods.addKey(web3.utils.keccak256(accounts[3]), 2, 1).send({from: accounts[0], gas: 300000}); //from 0
    unir.methods.addKey(web3.utils.keccak256(accounts[4]), 3, 1).send({from: accounts[1], gas: 300000}); //from 1
  }
}
initAcc();

async function changeIdentity() {

  var lastIdentity;
  var temporizador = setInterval(function() {
    var listAlu = document.getElementById("listIdentities");
    var currentIdentity = listAlu.options[listAlu.selectedIndex].value;

    if(currentIdentity !== lastIdentity){
      lastIdentity = currentIdentity;
      changeAction(currentIdentity);
    }
  }, 100);
}
changeIdentity();

async function changeAction(index) {
  if (index == 0 || index == 1){
    alu = document.getElementById("actionAlumno");
    alu.style.display = "block";
    uni = document.getElementById("actionUniversidad");
    uni.style.display = "none";
    veri = document.getElementById("actionVerifier");
    veri.style.display = "none";
    addAlu = document.getElementById("actionAddAlumno");
    addAlu.style.display = "none";
    var listAlu = document.getElementById("Addresses");
    listAlu.selectedIndex = 1
  } else if (index == 2 || index == 3) {
    alu = document.getElementById("actionAlumno");
    alu.style.display = "none";
    uni = document.getElementById("actionUniversidad");
    uni.style.display = "block";
    veri = document.getElementById("actionVerifier");
    veri.style.display = "none";
    addAlu = document.getElementById("actionAddAlumno");
    addAlu.style.display = "none";
    var listAlu = document.getElementById("Addresses");
    listAlu.selectedIndex = 5
  } else if (index == 4 || index == 5){
    alu = document.getElementById("actionAlumno");
    alu.style.display = "none";
    uni = document.getElementById("actionUniversidad");
    uni.style.display = "none";
    veri = document.getElementById("actionVerifier");
    veri.style.display = "block";
    addAlu = document.getElementById("actionAddAlumno");
    addAlu.style.display = "none";
    var listAlu = document.getElementById("Addresses");
    listAlu.selectedIndex = 8
  } else if (index = 6) {
    alu = document.getElementById("actionAlumno");
    alu.style.display = "none";
    uni = document.getElementById("actionUniversidad");
    uni.style.display = "none";
    veri = document.getElementById("actionVerifier");
    veri.style.display = "none";
    addAlu = document.getElementById("actionAddAlumno");
    addAlu.style.display = "block";
    var listAlu = document.getElementById("Addresses");
    listAlu.selectedIndex = 2
  }
}

async function addClaim() {
  var claimType = document.getElementById("claimType").value;
  var scheme = document.getElementById("scheme").value;
  var data = web3.utils.asciiToHex(document.getElementById("data").value)
  var uri = document.getElementById("uri").value
  var claimedElement = document.getElementById("claimedIdentity");
  var claimedIndex = claimedElement.options[claimedElement.selectedIndex].value;
  var claimedAddress = arrayAlumnos[claimedIndex].options.address;
  var hashed = web3.utils.soliditySha3(claimedAddress, claimType, data)
  var signed = await web3.eth.accounts.sign(hashed, unirPrivKey);
  var addClaimAbi = await arrayAlumnos[claimedIndex].methods.addClaim(parseInt(claimType), parseInt(scheme), unirAddress, signed.signature, data, uri).encodeABI();
  var response = await arrayAlumnos[claimedIndex].methods.execute(claimedAddress, 0, addClaimAbi).send({from: web3.eth.defaultAccount, gas: 3000000}); //from 4 o 3?
  var eventsList = document.getElementById("eventsList").innerHTML;
  document.getElementById("eventsList").innerHTML = eventsList + " <br> " + "ExecutionRequested con ID: " + response.events.ExecutionRequested.returnValues.executionId;
}
//addClaim();

async function approveClaim() {
  var claimId = document.getElementById("claimId").value
  var approverElement = document.getElementById("listIdentities");
  var approverIndex = approverElement.options[approverElement.selectedIndex].value
  var response = await arrayAlumnos[approverIndex].methods.approve(parseInt(claimId), true).send({from: web3.eth.defaultAccount, gas: 300000}); //from 0
  var eventsList = document.getElementById("eventsList").innerHTML;
  document.getElementById("eventsList").innerHTML = eventsList + " <br> " + "ClaimAdded con claimID: " + response.events.ClaimAdded.returnValues.claimId;
}
//approveClaim();

async function getClaim() {
  var claimId = document.getElementById("getClaimId").value;
  var getterElement = document.getElementById("listIdentities");
  var getterIndex = getterElement.options[getterElement.selectedIndex].value
  var response = await arrayAlumnos[getterIndex].methods.getClaim(claimId).call({gas: 300000})
  alert("ClaimType: " + response[0] + "\n" + "Scheme: " + response[1] + "\n" + "Issuer: " + response[2] + "\n" + "Signature: " + response[3] + "\n" + "Data: " + response[4] + "\n" + "URI: " + response[5])
}

async function getClaimIdsByType() {
  var claimType = document.getElementById("getClaimType").value;
  var getterElement = document.getElementById("listIdentities");
  var getterIndex = getterElement.options[getterElement.selectedIndex].value
  var response = await arrayAlumnos[getterIndex].methods.getClaimIdsByType(claimType).call({gas: 300000})
  alert("ID de las Claims con type " + claimType + ":\n" + response[0])
}

async function checkClaim() {
  var checkedElement = document.getElementById("checkedIdentity");
  var checkedIndex = checkedElement.options[checkedElement.selectedIndex].value;
  var checkedAddress = arrayAlumnos[checkedIndex].options.address;
  var claimType = document.getElementById("claimTypeChecked").value;
  var response = await verifier.methods.checkClaim(checkedAddress, claimType).send({from: web3.eth.defaultAccount, gas: 300000}); //from 3
  var eventsList = document.getElementById("eventsList").innerHTML;
  if (response.events.ClaimValid){
    document.getElementById("eventsList").innerHTML = eventsList + " <br> " + "ClaimValid of type: " + response.events.ClaimValid.returnValues.claimType;
    alert('ALEGACIÓN VÁLIDA')
  } else if (response.events.ClaimInvalid) {
    document.getElementById("eventsList").innerHTML = eventsList + " <br> " + "ClaimInvalid of type: " + response.events.ClaimInvalid.returnValues.claimType;
    alert('ALEGACIÓN INVÁLIDA')
  }
}
//checkClaim();

async function addAlumno() {
  var newAlumno = new web3.eth.Contract(alumnoAbi);
  arrayAlumnos.push(await newAlumno.deploy({data: alumnoBytecode}).send({from: publicKeys[5], gas: 3000000, gasPrice: '30000000000000'}))
  arrayAlumnos[1].methods.addKey(web3.utils.keccak256(publicKeys[3]), 2, 1).send({from: publicKeys[5], gas: 300000});
  alert("Alumno deployed in address: " + arrayAlumnos[1].options.address)
  document.getElementById("disAlumno").disabled = false;
  document.getElementById("disClaimed").disabled = false;
  document.getElementById("disVerified").disabled = false;
}
//addAlumno()

async function getTrusted() {
  let accounts = await web3.eth.getAccounts();
  var response = await trust.methods.getTrusted(unir.options.address).call({from: accounts[0], gas: 300000});
  alert(response);
}
//getTrusted();
